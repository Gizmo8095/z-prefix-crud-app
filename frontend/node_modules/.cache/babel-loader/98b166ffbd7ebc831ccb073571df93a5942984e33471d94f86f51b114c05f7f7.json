{"ast":null,"code":"var _jsxFileName = \"/home/mason/projects/z-prefix-crud-app/frontend/src/components/MyAccount.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Table, Button } from 'react-bootstrap';\nimport { useNavigate } from \"react-router-dom\";\nimport AppContext from \"../AppContext.js\";\nimport CreateItemModal from \"./CreateItemModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MyAccount({\n  setIsLoggedIn\n}) {\n  _s();\n  const navigate = useNavigate();\n  const [userItems, setUserItems] = useState([]);\n  const {\n    userList,\n    currentUser\n  } = useContext(AppContext);\n  const [showCreateItemModal, setShowCreateItemModal] = useState(false);\n  const handleuserdelete = () => {\n    fetch(`http://localhost:3001/users/${currentUser.id}`, {\n      method: 'DELETE'\n    }).then(response => {\n      if (response.ok) {\n        // Item deleted successfully\n        // Update the item list in the context\n        const updatedUserList = userList.filter(user => user.id !== Number(user.id));\n        setUserList(updatedUserList);\n        // Show a confirmation message\n        window.alert('User deleted successfully.');\n        // Redirect to the inventory page\n        setIsLoggedIn(false);\n        navigate(\"/\");\n      } else {\n        throw new Error('Failed to delete item');\n      }\n    }).catch(error => {\n      console.error('Delete error:', error);\n    });\n  };\n  useEffect(() => {\n    fetch(`http://localhost:3001/user-items/${currentUser.id}`).then(response => response.json()).then(data => setUserItems(data)).catch(error => console.error(\"Error fetching user data:\", error));\n  }, [currentUser.id]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleUserDelete,\n      children: \"Delete User\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => setShowCreateItemModal(true),\n      children: \"Create Item\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Table, {\n      striped: true,\n      bordered: true,\n      hover: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CreateItemModal, {\n      showModal: showCreateItemModal,\n      onCloseModal: () => setShowCreateItemModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(MyAccount, \"k0j2S5XcZaA5ZnQ4kP2TvHiPLA4=\", false, function () {\n  return [useNavigate];\n});\n_c = MyAccount;\nexport default MyAccount;\nvar _c;\n$RefreshReg$(_c, \"MyAccount\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Table","Button","useNavigate","AppContext","CreateItemModal","jsxDEV","_jsxDEV","Fragment","_Fragment","MyAccount","setIsLoggedIn","_s","navigate","userItems","setUserItems","userList","currentUser","showCreateItemModal","setShowCreateItemModal","handleuserdelete","fetch","id","method","then","response","ok","updatedUserList","filter","user","Number","setUserList","window","alert","Error","catch","error","console","json","data","children","onClick","handleUserDelete","fileName","_jsxFileName","lineNumber","columnNumber","striped","bordered","hover","showModal","onCloseModal","_c","$RefreshReg$"],"sources":["/home/mason/projects/z-prefix-crud-app/frontend/src/components/MyAccount.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { Table, Button } from 'react-bootstrap';\nimport { useNavigate } from \"react-router-dom\";\nimport AppContext from \"../AppContext.js\";\nimport CreateItemModal from \"./CreateItemModal\";\n\nfunction MyAccount({ setIsLoggedIn }) {\n  const navigate = useNavigate();\n  const [userItems, setUserItems] = useState([]);\n  const { userList, currentUser } = useContext(AppContext);\n  const [showCreateItemModal, setShowCreateItemModal] = useState(false);\n\n  const handleuserdelete = () => {\n    fetch(`http://localhost:3001/users/${currentUser.id}`, {\n      method: 'DELETE',\n    })\n      .then((response) => {\n        if (response.ok) {\n          // Item deleted successfully\n          // Update the item list in the context\n          const updatedUserList = userList.filter((user) => user.id !== Number(user.id));\n          setUserList(updatedUserList);\n          // Show a confirmation message\n          window.alert('User deleted successfully.');\n          // Redirect to the inventory page\n          setIsLoggedIn(false);\n          navigate(\"/\"); \n        } else {\n          throw new Error('Failed to delete item');\n        }\n      })\n      .catch((error) => {\n        console.error('Delete error:', error);\n      });\n  };\n\n  useEffect(() => {\n    fetch(`http://localhost:3001/user-items/${currentUser.id}`)\n      .then((response) => response.json())\n      .then((data) => setUserItems(data))\n      .catch((error) => console.error(\"Error fetching user data:\", error));\n  }, [currentUser.id]);\n\n  return (\n    <>\n      <Button onClick={handleUserDelete}>Delete User</Button>\n      <Button onClick={() => setShowCreateItemModal(true)}>Create Item</Button>\n      <Table striped bordered hover>\n        {/* ... (existing table code) */}\n      </Table>\n      <CreateItemModal\n        showModal={showCreateItemModal}\n        onCloseModal={() => setShowCreateItemModal(false)}\n      />\n    </>\n  );\n}\n\nexport default MyAccount;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}