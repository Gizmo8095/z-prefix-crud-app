{"ast":null,"code":"var _jsxFileName = \"/home/mason/projects/z-prefix-crud-app/frontend/src/components/LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport AppContext from \"../AppContext.js\";\nimport CreateUserModal from \"./CreateUserModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction LoginPage({\n  setIsLoggedIn,\n  closeModal\n}) {\n  _s();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loginError, setLoginError] = useState(false);\n  const [showCreateUserModal, setShowCreateUserModal] = useState(false); // State for showing the Create User modal\n\n  const {\n    userList,\n    setUserList,\n    setCurrentUser\n  } = useContext(AppContext);\n  const navigate = useNavigate();\n  const handleLogin = () => {\n    // Find the user with the matching username and password\n    const user = userList.find(user => user.username === username && user.password === password);\n    if (user) {\n      setCurrentUser(user);\n      setIsLoggedIn(true);\n      closeModal();\n      navigate(\"/myaccount\");\n    } else {\n      setLoginError(true);\n      setUsername(\"\");\n      setPassword(\"\");\n    }\n  };\n  const handleCreateUser = newUser => {\n    // Check if the username already exists in the userList\n    const isUsernameTaken = userList.some(user => user.username === newUser.username);\n    if (isUsernameTaken) {\n      // If username is taken, show the error message\n      setLoginError(true);\n    } else {\n      // If username is unique, generate a unique ID for the new user\n      const newId = getUniqueUserId();\n      newUser.id = newId;\n\n      // Add the new user to the userList\n      setUserList(prevUserList => [...prevUserList, newUser]);\n\n      // Set the current user and log them in\n      setCurrentUser(newUser);\n      setIsLoggedIn(true);\n\n      // Close the Create User modal and navigate to myaccount page\n      setShowCreateUserModal(false);\n      navigate(\"/myaccount\");\n    }\n  };\n  const getUniqueUserId = () => {\n    // Find the smallest integer ID that is not already taken\n    let newId = 1;\n    while (userList.some(user => user.id === newId)) {\n      newId++;\n    }\n    return newId;\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"#fff\",\n        padding: \"20px\",\n        borderRadius: \"5px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), loginError && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"red\"\n        },\n        children: \"Username or Password is incorrect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Username\",\n        value: username,\n        onChange: e => setUsername(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: password,\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogin,\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closeModal,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowCreateUserModal(true),\n          children: \"Create User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), showCreateUserModal && /*#__PURE__*/_jsxDEV(CreateUserModal, {\n      onClose: () => setShowCreateUserModal(false),\n      onUserCreate: handleCreateUser,\n      userList: userList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(LoginPage, \"5K16i4nnUi8Hk4pp3kfLwXOkmQk=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useContext","useNavigate","AppContext","CreateUserModal","jsxDEV","_jsxDEV","Fragment","_Fragment","LoginPage","setIsLoggedIn","closeModal","_s","username","setUsername","password","setPassword","loginError","setLoginError","showCreateUserModal","setShowCreateUserModal","userList","setUserList","setCurrentUser","navigate","handleLogin","user","find","handleCreateUser","newUser","isUsernameTaken","some","newId","getUniqueUserId","id","prevUserList","children","style","background","padding","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","color","type","placeholder","value","onChange","e","target","onClick","onClose","onUserCreate","_c","$RefreshReg$"],"sources":["/home/mason/projects/z-prefix-crud-app/frontend/src/components/LoginPage.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport AppContext from \"../AppContext.js\";\nimport CreateUserModal from \"./CreateUserModal\"; \n\nfunction LoginPage({ setIsLoggedIn, closeModal }) {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loginError, setLoginError] = useState(false);\n  const [showCreateUserModal, setShowCreateUserModal] = useState(false); // State for showing the Create User modal\n\n  const { userList, setUserList, setCurrentUser } = useContext(AppContext);\n  const navigate = useNavigate();\n\n  const handleLogin = () => {\n    // Find the user with the matching username and password\n    const user = userList.find(\n      (user) => user.username === username && user.password === password\n    );\n\n    if (user) {\n      setCurrentUser(user);\n      setIsLoggedIn(true);\n      closeModal();\n      navigate(\"/myaccount\");\n    } else {\n      setLoginError(true);\n      setUsername(\"\");\n      setPassword(\"\");\n    }\n  };\n\n  const handleCreateUser = (newUser) => {\n    // Check if the username already exists in the userList\n    const isUsernameTaken = userList.some((user) => user.username === newUser.username);\n\n    if (isUsernameTaken) {\n      // If username is taken, show the error message\n      setLoginError(true);\n    } else {\n      // If username is unique, generate a unique ID for the new user\n      const newId = getUniqueUserId();\n      newUser.id = newId;\n\n      // Add the new user to the userList\n      setUserList((prevUserList) => [...prevUserList, newUser]);\n\n      // Set the current user and log them in\n      setCurrentUser(newUser);\n      setIsLoggedIn(true);\n\n      // Close the Create User modal and navigate to myaccount page\n      setShowCreateUserModal(false);\n      navigate(\"/myaccount\");\n    }\n  };\n\n  const getUniqueUserId = () => {\n    // Find the smallest integer ID that is not already taken\n    let newId = 1;\n    while (userList.some((user) => user.id === newId)) {\n      newId++;\n    }\n    return newId;\n  };\n\n  return (\n    <>\n      <div style={{ background: \"#fff\", padding: \"20px\", borderRadius: \"5px\" }}>\n        <h2>Login</h2>\n        {loginError && <p style={{ color: \"red\" }}>Username or Password is incorrect</p>}\n        <input\n          type=\"text\"\n          placeholder=\"Username\"\n          value={username}\n          onChange={(e) => setUsername(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <button onClick={handleLogin}>Login</button>\n        <button onClick={closeModal}>Cancel</button>\n        <div>\n          <button onClick={() => setShowCreateUserModal(true)}>Create User</button>\n        </div>\n      </div>\n\n      {showCreateUserModal && (\n        <CreateUserModal\n          onClose={() => setShowCreateUserModal(false)}\n          onUserCreate={handleCreateUser}\n          userList={userList}\n        />\n      )}\n    </>\n  );\n}\n\nexport default LoginPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}